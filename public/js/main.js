!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){if(!t)throw new Error("View element undifined");this.el=t,this.on=function(t,e){return this.el.addEventListener(t,e),this},this.emit=function(t,e){var n=void 0;try{n=new CustomEvent(t,{detail:e})}catch(i){(n=document.createEvent("CustomEvent")).initCustomEvent(t,!1,!1,{data:e})}return this.el.dispatchEvent(n),this},this.hide=function(){return this.el.style.display="none",this},this.show=function(){return this.el.style.display="",this}}},function(t,e,n){"use strict";var i,r=n(2),u=(i=r)&&i.__esModule?i:{default:i};document.addEventListener("DOMContentLoaded",function(){u.default.init()})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(n(3)),r=o(n(4)),u=o(n(5));function o(t){return t&&t.__esModule?t:{default:t}}var s=void 0,l="[MainController]";e.default={init:function(){var t=this;new i.default(document.querySelector("form")).init().on("@submit",function(e){console.log("1-1",JSON.stringify(e)),t.onSubmit(e.detail.input),console.log("1-2")}).on("@reset",function(e){return t.onResetForm()}),(s=new r.default(document.getElementById("search-result"))).init()},search:function(t){var e=this;u.default.list(t).then(function(t){return e.onSearchResult(t)})},renderView:function(){},onSubmit:function(t){console.log(l,"onSubmit()",t),this.search(t)},onResetForm:function(){console.log(l,"onResetForm()"),this.renderView()},onSearchResult:function(t){s.render(t)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){u.default.call(this,t),this.inputEl=t.querySelector("[type=text]"),this.resetEl=t.querySelector("[type=reset]"),this.init=function(){return this.showResetBtn(!1),this.bindEvents(),this},this.showResetBtn=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.resetEl.style.display=t?"block":"none"},this.bindEvents=function(){var t=this;this.on("submit",function(t){return t.preventDefault()}),this.inputEl.addEventListener("keyup",function(e){return t.onKeyup(e)}),this.resetEl.addEventListener("click",function(e){return t.onClickReset()})},this.onKeyup=function(t){this.showResetBtn(this.inputEl.value.length),this.inputEl.value.length||this.emit("@reset"),13===t.keyCode&&this.emit("@submit",{input:this.inputEl.value})},this.onClickReset=function(){this.emit("@reset"),this.showResetBtn(!1)},this.setValue=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.inputEl.value=t,this.showResetBtn(this.inputEl.value.length)}};var i,r=n(0),u=(i=r)&&i.__esModule?i:{default:i}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){u.default.call(this,t),this.messages={NO_RESULT:"該当のドキュメントがありません。"},this.init=function(){return console.log(o,"init()"),this.hide(),this},this.render=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];console.log(o,"render()",t),this.el.innerHTML=t.length?this.getSearchResultsHtml(t):this.messages.NO_RESULT,this.show()},this.getSearchResultsHtml=function(t){var e=this;return t.reduce(function(t,n){return t+=e.getSearchItemHtml(n)},"<ul>")+"</ul>"},this.getSearchItemHtml=function(t){return"<li>\n      <h3>Document ID : "+t.id+"</h3>\n      <p>"+t.text+"</p>\n    </li><hr>"}};var i,r=n(0),u=(i=r)&&i.__esModule?i:{default:i};var o="[ResultView]"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={list:function(t){try{return fetch("/documents",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:t})}).then(function(t){return t.json()}).then(function(t){return t.documents}).catch(function(t){throw new Error(t)})}catch(e){return new Promise(function(e,n){var i=new XMLHttpRequest;if(!i)throw new Error("not able to create XMLHttpRequest");i.onreadystatechange=function(){httpRequest.readyState===XMLHttpRequest.DONE&&httpRequest.status>=200&&httpRequest.status<=300&&alert(httpRequest.responseText)},i.setRequestHeader("Content-Type","application/json"),i.open("POST","/documents"),i.send(JSON.stringify({query:t}))})}}}}]);